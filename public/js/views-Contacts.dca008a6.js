"use strict";(self["webpackChunkphonebook3_client"]=self["webpackChunkphonebook3_client"]||[]).push([[238],{7404:function(t,e,l){l.r(e),l.d(e,{default:function(){return Bt}});var n=l(3396);const a={key:0},s={class:"mt-4 row p-2"},i={ref:"observer",class:"observer"},o={key:1,class:"text-center",style:{"margin-top":"100px"}},r=(0,n._)("h1",{class:"display-4"},"Сервис временно недоступен :-(",-1),c=(0,n._)("p",{class:"lead"},"Загляните к нам чуть позднее. Мы его обязательно починим!",-1),d=[r,c];function m(t,e,l,r,c,m){const p=(0,n.up)("pb-search"),u=(0,n.up)("pb-contact-card"),h=(0,n.up)("pb-contact"),f=(0,n.up)("scale-loader");return m.apiService?((0,n.wg)(),(0,n.iD)("div",a,[(0,n.Wm)(p,{modelValue:c.filter,"onUpdate:modelValue":e[0]||(e[0]=t=>c.filter=t)},null,8,["modelValue"]),m.contact?((0,n.wg)(),(0,n.j4)(u,{key:0,item:m.contact},null,8,["item"])):(0,n.kq)("",!0),(0,n._)("div",s,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(m.contacts,((t,e)=>((0,n.wg)(),(0,n.j4)(h,{item:t,key:t.id,"department-title":m.departmentTitle(t.department,m.contacts[e-1]&&m.contacts[e-1].department),onClick:m.clickContact},null,8,["item","department-title","onClick"])))),128))]),(0,n._)("div",i,[(0,n.Wm)(f,{loading:m.loading,color:c.color,height:c.height,width:c.width,margin:c.margin,radius:c.radius},null,8,["loading","color","height","width","margin","radius"])],512)])):((0,n.wg)(),(0,n.iD)("div",o,d))}var p=l(7929),u=l(669),h=l(7139);const f=t=>((0,n.dD)("data-v-6026a1df"),t=t(),(0,n.Cn)(),t),v={class:"col-lg-6 p-0 d-flex"},g={class:"m-2 p-3 shadow-sm bg-white rounded d-flex flex-fill flex-row align-self-stretch"},x={class:"d-flex flex-column flex-fill"},w={class:"d-flex flex-column flex-sm-row"},b={class:"align-self-top text-center pt-2"},y={class:"p-2 flex-fill"},_=["textContent"],C=["textContent"],k=["textContent"],D={class:"d-flex flex-row justify-content-around justify-content-sm-between text-muted"},j={key:0,class:"me-1"},S=f((()=>(0,n._)("small",{class:"text-nowrap"},[(0,n._)("span",{class:"fa fa-phone"}),(0,n._)("span",{class:"font-weight-bold ms-1"},"Телефон для связи:")],-1))),P={key:1,class:"ms-1"},I=f((()=>(0,n._)("small",{class:"text-nowrap"},[(0,n._)("span",{class:"fa fa-at"}),(0,n._)("span",{class:"font-weight-bold ms-1"},"Электронная почта:")],-1)));function z(t,e,l,a,s,i){const o=(0,n.up)("pb-contact-department"),r=(0,n.up)("pb-photo"),c=(0,n.up)("pb-contact-value");return(0,n.wg)(),(0,n.iD)(n.HY,null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.departmentTitle,(t=>((0,n.wg)(),(0,n.j4)(o,{key:t,title:t},null,8,["title"])))),128)),(0,n._)("div",v,[(0,n._)("div",g,[(0,n._)("div",x,[(0,n._)("div",w,[(0,n._)("div",b,[(0,n.Wm)(r,{src:l.item.photo,onClick:i.clickContact},null,8,["src","onClick"])]),(0,n._)("div",y,[(0,n._)("h6",{class:"text-center text-sm-start click",textContent:(0,h.zw)(l.item.name),onClick:e[0]||(e[0]=(...t)=>i.clickContact&&i.clickContact(...t))},null,8,_),(0,n._)("small",null,[(0,n._)("p",{class:"text-center text-sm-start m-0",textContent:(0,h.zw)(l.item.title)},null,8,C),(0,n._)("p",{class:"text-center text-sm-start m-0",textContent:(0,h.zw)(l.item.department.name)},null,8,k)])])]),(0,n._)("div",D,[l.item.params.phone?((0,n.wg)(),(0,n.iD)("div",j,[S,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.item.params.phone,(t=>((0,n.wg)(),(0,n.j4)(c,{item:t,key:t,small:""},null,8,["item"])))),128))])):(0,n.kq)("",!0),l.item.params.email?((0,n.wg)(),(0,n.iD)("div",P,[I,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.item.params.email,(t=>((0,n.wg)(),(0,n.j4)(c,{item:t,key:t,small:""},null,8,["item"])))),128))])):(0,n.kq)("",!0)])])])])],64)}const V={key:0,class:"d-flex justify-content-between flex-wrap"},U={class:"me-2 text-nowrap"},H=["href"],Y={key:1,class:"d-flex justify-content-between flex-wrap"},Z={class:"me-2 text-nowrap"},F=["href"];function K(t,e,l,a,s,i){return l.small?((0,n.wg)(),(0,n.iD)("small",V,[(0,n._)("span",U,(0,h.zw)(l.item.type)+":",1),(0,n._)("a",{class:"text-nowrap flex-fill text-end",href:l.item.link},(0,h.zw)(l.item.value),9,H)])):((0,n.wg)(),(0,n.iD)("span",Y,[(0,n._)("span",Z,(0,h.zw)(l.item.type)+":",1),(0,n._)("a",{class:"text-nowrap flex-fill text-end",href:l.item.link},(0,h.zw)(l.item.value),9,F)]))}var M={name:"PbContactValue",props:{item:Object,small:{type:Boolean,default:!1}}},$=l(89);const q=(0,$.Z)(M,[["render",K]]);var T=q;const O={class:"col-12 p-0 d-flex"},R={class:"m-2 p-2 shadow-sm bg-light rounded d-flex flex-fill flex-column align-self-stretch"},W={class:"mx-2 d-lg-flex flex-row"},B=["textContent"];function L(t,e,l,a,s,i){return(0,n.wg)(),(0,n.iD)("div",O,[(0,n._)("div",R,[(0,n._)("div",W,[(0,n._)("h5",{class:"m-0 align-self-center flex-fill",textContent:(0,h.zw)(l.title)},null,8,B)])])])}var A={name:"PbContactDepartment",props:{title:String}};const E=(0,$.Z)(A,[["render",L]]);var N=E;const G=["src"];function J(t,e,l,a,s,i){return(0,n.wg)(),(0,n.iD)("img",{class:(0,h.C_)(["img-thumbnail","rounded",{click:t.$attrs.onClick}]),name:"photo",src:i.srcPhoto,style:{"min-width":"70px"}},null,10,G)}var Q={name:"PbPhoto",props:{src:String},data(){return{baseUrl:"http://10.10.2.250:3000/"}},computed:{srcPhoto(){return this.baseUrl+this.src}},mounted(){}};const X=(0,$.Z)(Q,[["render",J],["__scopeId","data-v-4ffde406"]]);var tt=X,et={name:"PbContact",props:{item:Object,departmentTitle:{type:Array,default:[]}},components:{PbContactValue:T,PbContactDepartment:N,PbPhoto:tt},emits:["click"],methods:{clickContact(t){this.$emit("click",this.item)}}};const lt=(0,$.Z)(et,[["render",z],["__scopeId","data-v-6026a1df"]]);var nt=lt;const at={class:"search"},st={class:"flex-fill"},it=(0,n._)("div",{class:"fas fa-times",style:{position:"absolute",cursor:"pointer","z-index":"0","font-size":"25px",color:"rgb(170, 170, 170)",top:"11.5px",right:"15px"}},null,-1),ot=[it],rt=["value"];function ct(t,e,l,a,s,i){return(0,n.wg)(),(0,n.iD)("div",at,[(0,n._)("div",st,[(0,n._)("div",{style:{position:"relative",margin:"0",padding:"0",border:"none"},onMouseover:e[2]||(e[2]=t=>s.hoverDiv=!0),onMouseleave:e[3]||(e[3]=t=>s.hoverDiv=!1)},[i.showClear?((0,n.wg)(),(0,n.iD)("div",{key:0,onClick:e[0]||(e[0]=(...t)=>i.clearInput&&i.clearInput(...t))},ot)):(0,n.kq)("",!0),(0,n._)("input",{ref:"search",type:"text",class:"form-control form-control-lg",placeholder:"Быстрый поиск контактов",spellcheck:"false",autocomplete:"off",value:l.modelValue,onInput:e[1]||(e[1]=(...t)=>i.updateInput&&i.updateInput(...t))},null,40,rt)],32)])])}var dt={name:"PbSearch",props:{modelValue:String},data(){return{hoverDiv:!1}},computed:{showClear(){return this.hoverDiv&&this.modelValue.length>0}},methods:{updateInput(t){this.$emit("update:modelValue",t.target.value)},clearInput(){this.$emit("update:modelValue",""),this.$refs.search.focus()}}};const mt=(0,$.Z)(dt,[["render",ct]]);var pt=mt;const ut=t=>((0,n.dD)("data-v-7d75b2f1"),t=t(),(0,n.Cn)(),t),ht={class:"mt-4"},ft={class:"p-3 shadow-sm bg-white rounded d-flex flex-fill flex-row align-self-stretch"},vt={class:"d-flex flex-column flex-fill"},gt={class:"d-flex flex-column flex-sm-row"},xt={class:"align-self-top text-center me-0 me-sm-4"},wt={class:"p-2 flex-fill text-center text-sm-start"},bt=["textContent"],yt=["textContent"],_t={class:"mt-3"},Ct={"aria-label":"breadcrumb"},kt={class:"breadcrumb bg-light justify-content-center justify-content-sm-start"},Dt=["textContent","href"],jt={class:"mt-4 row text-muted"},St={class:"d-flex flex-column col align-items-stretch m-2"},Pt=ut((()=>(0,n._)("h6",{class:"m-0 pb-2",style:{"border-bottom":"1px solid #dee2e6"}},[(0,n._)("span",{class:"fa fa-phone"}),(0,n._)("span",{class:"ms-3"},"Телефон для связи:")],-1))),It={class:"flex-fill py-2"},zt={class:"d-flex flex-column col align-items-stretch m-2"},Vt=ut((()=>(0,n._)("h6",{class:"m-0 pb-2",style:{"border-bottom":"1px solid #dee2e6"}},[(0,n._)("span",{class:"fa fa-at"}),(0,n._)("span",{class:"ms-3"},"Электронная почта:")],-1))),Ut={class:"flex-fill py-2"};function Ht(t,e,l,a,s,i){const o=(0,n.up)("pb-photo"),r=(0,n.up)("pb-contact-value");return(0,n.wg)(),(0,n.iD)("div",ht,[(0,n._)("div",ft,[(0,n._)("div",vt,[(0,n._)("div",gt,[(0,n._)("div",xt,[(0,n.Wm)(o,{src:l.item.photo},null,8,["src"])]),(0,n._)("div",wt,[(0,n._)("h3",{textContent:(0,h.zw)(l.item.name)},null,8,bt),(0,n._)("span",null,[(0,n._)("p",{textContent:(0,h.zw)(l.item.title)},null,8,yt),(0,n._)("div",_t,[(0,n._)("nav",Ct,[(0,n._)("ol",kt,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.item.department,((t,e)=>((0,n.wg)(),(0,n.iD)("li",{key:t,class:"breadcrumb-item"},[(0,n._)("a",{textContent:(0,h.zw)(t),href:"#"+l.item.department.slice(0,e+1).join(" ")},null,8,Dt)])))),128))])])])]),(0,n._)("div",jt,[(0,n._)("div",St,[Pt,(0,n._)("div",It,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.item.params.phone,(t=>((0,n.wg)(),(0,n.j4)(r,{item:t,key:t},null,8,["item"])))),128))])]),(0,n._)("div",zt,[Vt,(0,n._)("div",Ut,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.item.params.email,(t=>((0,n.wg)(),(0,n.j4)(r,{item:t,key:t},null,8,["item"])))),128))])])])])])])])])}var Yt={name:"PbContactCard",props:{item:Object},components:{PbPhoto:tt,PbContactValue:T},mounted(){}};const Zt=(0,$.Z)(Yt,[["render",Ht],["__scopeId","data-v-7d75b2f1"]]);var Ft=Zt,Kt=l(9242);const Mt={class:"v-spinner"};function $t(t,e,l,a,s,i){return(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",Mt,[(0,n._)("div",{class:"v-scale v-scale1",style:(0,h.j5)([s.spinnerStyle,s.spinnerDelay1])},null,4),(0,n._)("div",{class:"v-scale v-scale2",style:(0,h.j5)([s.spinnerStyle,s.spinnerDelay2])},null,4),(0,n._)("div",{class:"v-scale v-scale3",style:(0,h.j5)([s.spinnerStyle,s.spinnerDelay3])},null,4),(0,n._)("div",{class:"v-scale v-scale4",style:(0,h.j5)([s.spinnerStyle,s.spinnerDelay4])},null,4),(0,n._)("div",{class:"v-scale v-scale5",style:(0,h.j5)([s.spinnerStyle,s.spinnerDelay5])},null,4)],512)),[[Kt.F8,l.loading]])}var qt={name:"ScaleLoader",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#5dc596"},height:{type:String,default:"35px"},width:{type:String,default:"4px"},margin:{type:String,default:"2px"},radius:{type:String,default:"2px"}},data(){return{spinnerStyle:{backgroundColor:this.color,height:this.height,width:this.width,margin:this.margin,borderRadius:this.radius,display:"inline-block",animationName:"v-scaleStretchDelay",animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(.2,.68,.18,1.08)",animationFillMode:"both"},spinnerDelay1:{animationDelay:"0.1s"},spinnerDelay2:{animationDelay:"0.2s"},spinnerDelay3:{animationDelay:"0.3s"},spinnerDelay4:{animationDelay:"0.4s"},spinnerDelay5:{animationDelay:"0.5s"}}}};const Tt=(0,$.Z)(qt,[["render",$t]]);var Ot=Tt,Rt={name:"Contacts",components:{PbContact:nt,ScaleLoader:Ot,PbSearch:pt,PbContactCard:Ft},data(){return{color:"#337ab7",height:"20px",width:"4px",margin:"2px",radius:"0px",limit:30,filter:this.getUrlHashValue()}},computed:{contacts:()=>(0,u.U2)("phonebook@contacts").value,contact:()=>(0,u.U2)("phonebook@contact").value,loading:()=>(0,u.U2)("phonebook@loading").value,lastFilter:()=>(0,u.U2)("phonebook@lastFilter").value,apiService:()=>(0,u.U2)("phonebook@apiService").value},mounted(){const t={rootMargin:"0px",threshold:1},e=(t,e)=>{t[0].isIntersecting&&this.loadMoreContacts({limit:0==this.contacts.length?10:this.limit,filter:this.filter})},l=new IntersectionObserver(e,t);l.observe(this.$refs.observer)},unmounted(){this.contacts.length>100&&this.loadContacts({limit:10,filter:this.filter,reload:!0})},methods:{...(0,u.RE)("phonebook",["loadMoreContacts","loadContacts"]),departmentTitle(t,e=[]){for(let l=0;l<t.length;l++)if(!e[l]||e[l]!=t[l])return t.slice(l);return[]},getUrlHashValue(){return decodeURIComponent(window.location.hash.slice(1))},clickContact(t){this.filter=t.name}},watch:{filter(t){window.location.hash=t,t!=this.lastFilter&&this.loadContacts({limit:10,filter:t,reload:!0})}},setup(){(0,p.jq)({title:"Контакты | Телефонный справочник [версия 3.0]"})},created(){this.filter=this.lastFilter||this.getUrlHashValue(),window.onhashchange=t=>{this.filter=decodeURIComponent(t.target.location.hash.slice(1))}}};const Wt=(0,$.Z)(Rt,[["render",m]]);var Bt=Wt}}]);
//# sourceMappingURL=views-Contacts.dca008a6.js.map