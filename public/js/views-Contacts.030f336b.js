"use strict";(self["webpackChunkphonebook3_client"]=self["webpackChunkphonebook3_client"]||[]).push([[238],{8462:function(e,t,l){l.r(t),l.d(t,{default:function(){return Be}});var a=l(3396);const n={key:0},s={class:"mt-4 row p-2"},i={ref:"observer",class:"observer"},o={key:1,class:"text-center",style:{"margin-top":"100px"}},r=(0,a._)("h1",{class:"display-4"},"Сервис временно недоступен :-(",-1),c=(0,a._)("p",{class:"lead"},"Загляните к нам чуть позднее. Мы его обязательно починим!",-1),d=[r,c];function m(e,t,l,r,c,m){const p=(0,a.up)("pb-search"),u=(0,a.up)("pb-contact-card"),h=(0,a.up)("pb-contact"),f=(0,a.up)("scale-loader");return m.apiService?((0,a.wg)(),(0,a.iD)("div",n,[(0,a.Wm)(p,{modelValue:c.filter,"onUpdate:modelValue":t[0]||(t[0]=e=>c.filter=e)},null,8,["modelValue"]),m.contact?((0,a.wg)(),(0,a.j4)(u,{key:0,item:m.contact},null,8,["item"])):(0,a.kq)("",!0),(0,a._)("div",s,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.contacts,((e,t)=>((0,a.wg)(),(0,a.j4)(h,{item:e,key:e.id,"department-title":m.departmentTitle(e.department,m.contacts[t-1]&&m.contacts[t-1].department),onClick:m.clickContact},null,8,["item","department-title","onClick"])))),128))]),(0,a._)("div",i,[(0,a.Wm)(f,{loading:m.loading,color:c.color,height:c.height,width:c.width,margin:c.margin,radius:c.radius},null,8,["loading","color","height","width","margin","radius"])],512)])):((0,a.wg)(),(0,a.iD)("div",o,d))}var p=l(7929),u=l(669),h=l(7139);const f=e=>((0,a.dD)("data-v-6026a1df"),e=e(),(0,a.Cn)(),e),v={class:"col-lg-6 p-0 d-flex"},x={class:"m-2 p-3 shadow-sm bg-white rounded d-flex flex-fill flex-row align-self-stretch"},g={class:"d-flex flex-column flex-fill"},w={class:"d-flex flex-column flex-sm-row"},b={class:"align-self-top text-center pt-2"},y={class:"p-2 flex-fill"},_=["textContent"],k=["textContent"],C=["textContent"],D={class:"d-flex flex-row justify-content-around justify-content-sm-between text-muted"},j={key:0,class:"me-1"},S=f((()=>(0,a._)("small",{class:"text-nowrap"},[(0,a._)("span",{class:"fa fa-phone"}),(0,a._)("span",{class:"font-weight-bold ms-1"},"Телефон для связи:")],-1))),P={key:1,class:"ms-1"},V=f((()=>(0,a._)("small",{class:"text-nowrap"},[(0,a._)("span",{class:"fa fa-at"}),(0,a._)("span",{class:"font-weight-bold ms-1"},"Электронная почта:")],-1)));function z(e,t,l,n,s,i){const o=(0,a.up)("pb-contact-department"),r=(0,a.up)("pb-photo"),c=(0,a.up)("pb-contact-value");return(0,a.wg)(),(0,a.iD)(a.HY,null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.departmentTitle,(e=>((0,a.wg)(),(0,a.j4)(o,{key:e,title:e},null,8,["title"])))),128)),(0,a._)("div",v,[(0,a._)("div",x,[(0,a._)("div",g,[(0,a._)("div",w,[(0,a._)("div",b,[(0,a.Wm)(r,{src:l.item.photo,onClick:i.clickContact},null,8,["src","onClick"])]),(0,a._)("div",y,[(0,a._)("h6",{class:"text-center text-sm-start click",textContent:(0,h.zw)(l.item.name),onClick:t[0]||(t[0]=(...e)=>i.clickContact&&i.clickContact(...e))},null,8,_),(0,a._)("small",null,[(0,a._)("p",{class:"text-center text-sm-start m-0",textContent:(0,h.zw)(l.item.title)},null,8,k),(0,a._)("p",{class:"text-center text-sm-start m-0",textContent:(0,h.zw)(l.item.department.name)},null,8,C)])])]),(0,a._)("div",D,[l.item.params.phone?((0,a.wg)(),(0,a.iD)("div",j,[S,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.item.params.phone,(e=>((0,a.wg)(),(0,a.j4)(c,{item:e,key:e,small:""},null,8,["item"])))),128))])):(0,a.kq)("",!0),l.item.params.email?((0,a.wg)(),(0,a.iD)("div",P,[V,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.item.params.email,(e=>((0,a.wg)(),(0,a.j4)(c,{item:e,key:e,small:""},null,8,["item"])))),128))])):(0,a.kq)("",!0)])])])])],64)}const U={key:0,class:"d-flex justify-content-between flex-wrap"},H={class:"me-2 text-nowrap"},I=["href"],Y={key:1,class:"d-flex justify-content-between flex-wrap"},Z={class:"me-2 text-nowrap"},F=["href"];function K(e,t,l,n,s,i){return l.small?((0,a.wg)(),(0,a.iD)("small",U,[(0,a._)("span",H,(0,h.zw)(l.item.type)+":",1),(0,a._)("a",{class:"text-nowrap flex-fill text-end",href:l.item.link},(0,h.zw)(l.item.value),9,I)])):((0,a.wg)(),(0,a.iD)("span",Y,[(0,a._)("span",Z,(0,h.zw)(l.item.type)+":",1),(0,a._)("a",{class:"text-nowrap flex-fill text-end",href:l.item.link},(0,h.zw)(l.item.value),9,F)]))}var $={name:"PbContactValue",props:{item:Object,small:{type:Boolean,default:!1}}},M=l(89);const q=(0,M.Z)($,[["render",K]]);var T=q;const O={class:"col-12 p-0 d-flex"},W={class:"m-2 p-2 shadow-sm bg-light rounded d-flex flex-fill flex-column align-self-stretch"},R={class:"mx-2 d-lg-flex flex-row"},B=["textContent"];function L(e,t,l,n,s,i){return(0,a.wg)(),(0,a.iD)("div",O,[(0,a._)("div",W,[(0,a._)("div",R,[(0,a._)("h5",{class:"m-0 align-self-center flex-fill",textContent:(0,h.zw)(l.title)},null,8,B)])])])}var A={name:"PbContactDepartment",props:{title:String}};const E=(0,M.Z)(A,[["render",L]]);var N=E;const G=["src"];function J(e,t,l,n,s,i){return(0,a.wg)(),(0,a.iD)("img",{class:(0,h.C_)(["img-thumbnail","rounded",{click:e.$attrs.onClick}]),name:"photo",src:i.srcPhoto,style:{"min-width":"70px"}},null,10,G)}var Q={name:"PbPhoto",props:{src:String},data(){return{baseUrl:""}},computed:{srcPhoto(){return this.baseUrl+this.src}},mounted(){}};const X=(0,M.Z)(Q,[["render",J],["__scopeId","data-v-70791986"]]);var ee=X,te={name:"PbContact",props:{item:Object,departmentTitle:{type:Array,default:[]}},components:{PbContactValue:T,PbContactDepartment:N,PbPhoto:ee},emits:["click"],methods:{clickContact(e){this.$emit("click",this.item)}}};const le=(0,M.Z)(te,[["render",z],["__scopeId","data-v-6026a1df"]]);var ae=le;const ne={class:"search"},se={class:"flex-fill"},ie=(0,a._)("div",{class:"fas fa-times",style:{position:"absolute",cursor:"pointer","z-index":"0","font-size":"25px",color:"rgb(170, 170, 170)",top:"11.5px",right:"15px"}},null,-1),oe=[ie],re=["value"];function ce(e,t,l,n,s,i){return(0,a.wg)(),(0,a.iD)("div",ne,[(0,a._)("div",se,[(0,a._)("div",{style:{position:"relative",margin:"0",padding:"0",border:"none"},onMouseover:t[2]||(t[2]=e=>s.hoverDiv=!0),onMouseleave:t[3]||(t[3]=e=>s.hoverDiv=!1)},[i.showClear?((0,a.wg)(),(0,a.iD)("div",{key:0,onClick:t[0]||(t[0]=(...e)=>i.clear&&i.clear(...e))},oe)):(0,a.kq)("",!0),(0,a._)("input",{ref:"search",type:"text",class:"form-control form-control-lg",placeholder:"Быстрый поиск контактов",spellcheck:"false",autocomplete:"off",value:l.modelValue,onInput:t[1]||(t[1]=(...e)=>i.updateInput&&i.updateInput(...e))},null,40,re)],32)])])}var de={name:"PbSearch",props:{modelValue:String},data(){return{hoverDiv:!1}},computed:{showClear(){return this.hoverDiv&&this.modelValue.length>0}},methods:{updateInput(e){this.$emit("update:modelValue",e.target.value)},clear(){this.$emit("update:modelValue",""),this.$refs.search.focus()},focus(){this.$refs.search.focus()}}};const me=(0,M.Z)(de,[["render",ce]]);var pe=me;const ue=e=>((0,a.dD)("data-v-7d75b2f1"),e=e(),(0,a.Cn)(),e),he={class:"mt-4"},fe={class:"p-3 shadow-sm bg-white rounded d-flex flex-fill flex-row align-self-stretch"},ve={class:"d-flex flex-column flex-fill"},xe={class:"d-flex flex-column flex-sm-row"},ge={class:"align-self-top text-center me-0 me-sm-4"},we={class:"p-2 flex-fill text-center text-sm-start"},be=["textContent"],ye=["textContent"],_e={class:"mt-3"},ke={"aria-label":"breadcrumb"},Ce={class:"breadcrumb bg-light justify-content-center justify-content-sm-start"},De=["textContent","href"],je={class:"mt-4 row text-muted"},Se={class:"d-flex flex-column col align-items-stretch m-2"},Pe=ue((()=>(0,a._)("h6",{class:"m-0 pb-2",style:{"border-bottom":"1px solid #dee2e6"}},[(0,a._)("span",{class:"fa fa-phone"}),(0,a._)("span",{class:"ms-3"},"Телефон для связи:")],-1))),Ve={class:"flex-fill py-2"},ze={class:"d-flex flex-column col align-items-stretch m-2"},Ue=ue((()=>(0,a._)("h6",{class:"m-0 pb-2",style:{"border-bottom":"1px solid #dee2e6"}},[(0,a._)("span",{class:"fa fa-at"}),(0,a._)("span",{class:"ms-3"},"Электронная почта:")],-1))),He={class:"flex-fill py-2"};function Ie(e,t,l,n,s,i){const o=(0,a.up)("pb-photo"),r=(0,a.up)("pb-contact-value");return(0,a.wg)(),(0,a.iD)("div",he,[(0,a._)("div",fe,[(0,a._)("div",ve,[(0,a._)("div",xe,[(0,a._)("div",ge,[(0,a.Wm)(o,{src:l.item.photo},null,8,["src"])]),(0,a._)("div",we,[(0,a._)("h3",{textContent:(0,h.zw)(l.item.name)},null,8,be),(0,a._)("span",null,[(0,a._)("p",{textContent:(0,h.zw)(l.item.title)},null,8,ye),(0,a._)("div",_e,[(0,a._)("nav",ke,[(0,a._)("ol",Ce,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.item.department,((e,t)=>((0,a.wg)(),(0,a.iD)("li",{key:e,class:"breadcrumb-item"},[(0,a._)("a",{textContent:(0,h.zw)(e),href:"#"+l.item.department.slice(0,t+1).join(" ")},null,8,De)])))),128))])])])]),(0,a._)("div",je,[(0,a._)("div",Se,[Pe,(0,a._)("div",Ve,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.item.params.phone,(e=>((0,a.wg)(),(0,a.j4)(r,{item:e,key:e},null,8,["item"])))),128))])]),(0,a._)("div",ze,[Ue,(0,a._)("div",He,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.item.params.email,(e=>((0,a.wg)(),(0,a.j4)(r,{item:e,key:e},null,8,["item"])))),128))])])])])])])])])}var Ye={name:"PbContactCard",props:{item:Object},components:{PbPhoto:ee,PbContactValue:T},mounted(){}};const Ze=(0,M.Z)(Ye,[["render",Ie],["__scopeId","data-v-7d75b2f1"]]);var Fe=Ze,Ke=l(9242);const $e={class:"v-spinner"};function Me(e,t,l,n,s,i){return(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",$e,[(0,a._)("div",{class:"v-scale v-scale1",style:(0,h.j5)([s.spinnerStyle,s.spinnerDelay1])},null,4),(0,a._)("div",{class:"v-scale v-scale2",style:(0,h.j5)([s.spinnerStyle,s.spinnerDelay2])},null,4),(0,a._)("div",{class:"v-scale v-scale3",style:(0,h.j5)([s.spinnerStyle,s.spinnerDelay3])},null,4),(0,a._)("div",{class:"v-scale v-scale4",style:(0,h.j5)([s.spinnerStyle,s.spinnerDelay4])},null,4),(0,a._)("div",{class:"v-scale v-scale5",style:(0,h.j5)([s.spinnerStyle,s.spinnerDelay5])},null,4)],512)),[[Ke.F8,l.loading]])}var qe={name:"ScaleLoader",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#5dc596"},height:{type:String,default:"35px"},width:{type:String,default:"4px"},margin:{type:String,default:"2px"},radius:{type:String,default:"2px"}},data(){return{spinnerStyle:{backgroundColor:this.color,height:this.height,width:this.width,margin:this.margin,borderRadius:this.radius,display:"inline-block",animationName:"v-scaleStretchDelay",animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(.2,.68,.18,1.08)",animationFillMode:"both"},spinnerDelay1:{animationDelay:"0.1s"},spinnerDelay2:{animationDelay:"0.2s"},spinnerDelay3:{animationDelay:"0.3s"},spinnerDelay4:{animationDelay:"0.4s"},spinnerDelay5:{animationDelay:"0.5s"}}}};const Te=(0,M.Z)(qe,[["render",Me]]);var Oe=Te,We={name:"Contacts",components:{PbContact:ae,ScaleLoader:Oe,PbSearch:pe,PbContactCard:Fe},data(){return{color:"#337ab7",height:"20px",width:"4px",margin:"2px",radius:"0px",limit:30,filter:this.getUrlHashValue()}},computed:{contacts:()=>(0,u.U2)("phonebook@contacts").value,contact:()=>(0,u.U2)("phonebook@contact").value,loading:()=>(0,u.U2)("phonebook@loading").value,lastFilter:()=>(0,u.U2)("phonebook@lastFilter").value,apiService:()=>(0,u.U2)("phonebook@apiService").value},mounted(){const e={rootMargin:"0px",threshold:1},t=(e,t)=>{e[0].isIntersecting&&this.loadMoreContacts({limit:0==this.contacts.length?10:this.limit,filter:this.filter})},l=new IntersectionObserver(t,e);l.observe(this.$refs.observer)},unmounted(){this.contacts.length>100&&this.loadContacts({limit:10,filter:this.filter,reload:!0})},methods:{...(0,u.RE)("phonebook",["loadMoreContacts","loadContacts"]),departmentTitle(e,t=[]){for(let l=0;l<e.length;l++)if(!t[l]||t[l]!=e[l])return e.slice(l);return[]},getUrlHashValue(){let e=decodeURIComponent(window.location.hash.slice(1));switch(e){case"index":return""}return e},clickContact(e){this.filter=e.name}},watch:{filter(e){window.location.hash=e,e!=this.lastFilter&&this.loadContacts({limit:10,filter:e,reload:!0})}},setup(){(0,p.jq)({title:"Контакты | Телефонный справочник [версия 3.0]"})},created(){this.filter=this.lastFilter||this.getUrlHashValue(),window.onhashchange=e=>{let t=this.getUrlHashValue();switch(t){case"index":this.filter="";break;default:this.filter=t}}}};const Re=(0,M.Z)(We,[["render",m]]);var Be=Re}}]);
//# sourceMappingURL=views-Contacts.030f336b.js.map