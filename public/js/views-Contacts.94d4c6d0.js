"use strict";(self["webpackChunkphonebook3_client"]=self["webpackChunkphonebook3_client"]||[]).push([[238],{3688:function(t,e,l){l.r(e),l.d(e,{default:function(){return fe}});var n=l(3396);const a={key:0},i={ref:"observer",class:"observer"},s={key:1,class:"text-center",style:{"margin-top":"100px"}},o=(0,n._)("h1",{class:"display-4"},"Сервис временно недоступен :-(",-1),c=(0,n._)("p",{class:"lead"},"Загляните к нам чуть позднее. Мы его обязательно починим!",-1),r=[o,c];function m(t,e,l,o,c,m){const d=(0,n.up)("pb-search"),p=(0,n.up)("pb-detail-contact"),u=(0,n.up)("pb-contacts"),f=(0,n.up)("scale-loader");return t.apiService?((0,n.wg)(),(0,n.iD)("div",a,[(0,n.Wm)(d,{modelValue:c.filter,"onUpdate:modelValue":e[0]||(e[0]=t=>c.filter=t)},null,8,["modelValue"]),t.contact?((0,n.wg)(),(0,n.j4)(p,{key:0,item:t.contact},null,8,["item"])):(0,n.kq)("",!0),(0,n.Wm)(u,{contacts:t.contacts,view:t.defaultView,onFilter:e[1]||(e[1]=t=>c.filter=t)},null,8,["contacts","view"]),(0,n._)("div",i,[(0,n.Wm)(f,{loading:t.loading,color:"#337ab7",height:"20px",width:"4px",margin:"2px",radius:"0px"},null,8,["loading"])],512)])):((0,n.wg)(),(0,n.iD)("div",s,r))}var d=l(7929),p=l(6728),u=l(669);const f={class:"search"},h={class:"flex-fill"},v=(0,n._)("div",{class:"fas fa-times",style:{position:"absolute",cursor:"pointer","z-index":"0","font-size":"25px",color:"rgb(170, 170, 170)",top:"11.5px",right:"15px"}},null,-1),x=[v],w=["value"];function g(t,e,l,a,i,s){return(0,n.wg)(),(0,n.iD)("div",f,[(0,n._)("div",h,[(0,n._)("div",{style:{position:"relative",margin:"0",padding:"0",border:"none"},onMouseover:e[2]||(e[2]=t=>i.hoverDiv=!0),onMouseleave:e[3]||(e[3]=t=>i.hoverDiv=!1)},[s.showClear?((0,n.wg)(),(0,n.iD)("div",{key:0,onClick:e[0]||(e[0]=(...t)=>s.clear&&s.clear(...t))},x)):(0,n.kq)("",!0),(0,n._)("input",{ref:"search",type:"text",class:"form-control form-control-lg",placeholder:"Быстрый поиск контактов",spellcheck:"false",autocomplete:"off",value:l.modelValue,onInput:e[1]||(e[1]=(...t)=>s.updateInput&&s.updateInput(...t))},null,40,w)],32)])])}var y={name:"PbSearch",props:{modelValue:String},data(){return{hoverDiv:!1}},computed:{showClear(){return this.hoverDiv&&this.modelValue.length>0}},mounted(){this.searchIntercept&&window.addEventListener("keydown",(t=>{(114===t.keyCode||t.ctrlKey&&70===t.keyCode)&&(t.preventDefault(),this.focus())}))},methods:{updateInput(t){this.$emit("update:modelValue",t.target.value)},clear(){this.$emit("update:modelValue",""),this.$refs.search.focus()},focus(){this.$refs.search.focus()}},setup(){return{...(0,u.U2)("app/*")}}},b=l(89);const _=(0,b.Z)(y,[["render",g]]);var C=_,k=l(7139);const D=t=>((0,n.dD)("data-v-2171889b"),t=t(),(0,n.Cn)(),t),P={class:"mt-4"},j={class:"p-3 shadow-sm bg-white rounded d-flex flex-fill flex-row align-self-stretch"},S={class:"d-flex flex-column flex-fill"},H={class:"d-flex flex-column flex-sm-row"},I={class:"align-self-top text-center me-0 me-sm-4"},V={class:"p-2 flex-fill text-center text-sm-start"},q=["textContent"],z=["textContent"],Y={class:"mt-3"},K={"aria-label":"breadcrumb"},$={class:"breadcrumb bg-light justify-content-center justify-content-sm-start"},T=["textContent","href"],U={class:"mt-4 row text-muted"},Z={class:"d-flex flex-column col align-items-stretch m-2"},F=D((()=>(0,n._)("h6",{class:"m-0 pb-2",style:{"border-bottom":"1px solid #dee2e6"}},[(0,n._)("span",{class:"fa fa-phone"}),(0,n._)("span",{class:"ms-3"},"Телефон для связи:")],-1))),W={class:"flex-fill py-2"},E={class:"d-flex flex-column col align-items-stretch m-2"},M=D((()=>(0,n._)("h6",{class:"m-0 pb-2",style:{"border-bottom":"1px solid #dee2e6"}},[(0,n._)("span",{class:"fa fa-at"}),(0,n._)("span",{class:"ms-3"},"Электронная почта:")],-1))),O={class:"flex-fill py-2"};function R(t,e,l,a,i,s){const o=(0,n.up)("pb-contact-photo"),c=(0,n.up)("pb-contact-value");return(0,n.wg)(),(0,n.iD)("div",P,[(0,n._)("div",j,[(0,n._)("div",S,[(0,n._)("div",H,[(0,n._)("div",I,[(0,n.Wm)(o,{src:l.item.photo},null,8,["src"])]),(0,n._)("div",V,[(0,n._)("h3",{textContent:(0,k.zw)(l.item.name)},null,8,q),(0,n._)("span",null,[(0,n._)("p",{textContent:(0,k.zw)(l.item.title)},null,8,z),(0,n._)("div",Y,[(0,n._)("nav",K,[(0,n._)("ol",$,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.item.department,((t,e)=>((0,n.wg)(),(0,n.iD)("li",{key:t,class:"breadcrumb-item"},[(0,n._)("a",{textContent:(0,k.zw)(t),href:"#"+l.item.department.slice(0,e+1).join(" ")},null,8,T)])))),128))])])])]),(0,n._)("div",U,[(0,n._)("div",Z,[F,(0,n._)("div",W,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.item.params.phone,(t=>((0,n.wg)(),(0,n.j4)(c,{item:t,key:t},null,8,["item"])))),128))])]),(0,n._)("div",E,[M,(0,n._)("div",O,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.item.params.email,(t=>((0,n.wg)(),(0,n.j4)(c,{item:t,key:t},null,8,["item"])))),128))])])])])])])])])}const A=["src"];function B(t,e,l,a,i,s){return(0,n.wg)(),(0,n.iD)("img",{class:(0,k.C_)(["img-thumbnail","rounded",{click:t.$attrs.onClick}]),name:"photo",src:s.srcPhoto,style:{"min-width":"70px"}},null,10,A)}var L={name:"PbPhoto",props:{src:String},data(){return{baseUrl:p.v.baseApi}},computed:{srcPhoto(){return this.baseUrl+this.src}},mounted(){}};const N=(0,b.Z)(L,[["render",B],["__scopeId","data-v-a8663694"]]);var G=N;const J=["title"],Q={key:0,class:"me-2 text-nowrap"},X=["href","textContent"],tt={key:0,class:"me-2 text-nowrap"},et=["href","textContent"];function lt(t,e,l,a,i,s){return(0,n.wg)(),(0,n.iD)("div",{class:"value",title:l.hint&&l.item.type||null},[l.small?((0,n.wg)(),(0,n.iD)("small",{key:0,class:(0,k.C_)(["d-flex flex-wrap",{"justify-content-between":!l.center},{"justify-content-center":l.center}])},[l.notitle?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("span",Q,(0,k.zw)(l.item.type)+":",1)),(0,n._)("a",{class:(0,k.C_)(["text-nowrap text-end",{"flex-fill":!l.center}]),href:l.item.link,textContent:(0,k.zw)(l.item.value)},null,10,X)],2)):((0,n.wg)(),(0,n.iD)("span",{key:1,class:(0,k.C_)(["d-flex flex-wrap",{"justify-content-between":!l.center},{"justify-content-center":l.center}])},[l.notitle?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("span",tt,(0,k.zw)(l.item.type)+":",1)),(0,n._)("a",{class:(0,k.C_)(["text-nowrap text-end",{"flex-fill":!l.center}]),href:l.item.link,textContent:(0,k.zw)(l.item.value)},null,10,et)],2))],8,J)}var nt={name:"PbContactValue",props:{item:Object,small:{type:Boolean,default:!1},notitle:{type:Boolean,default:!1},center:{type:Boolean,default:!1},hint:{type:Boolean,default:!1}}};const at=(0,b.Z)(nt,[["render",lt],["__scopeId","data-v-f36e5804"]]);var it=at,st={name:"PbDetailContact",props:{item:Object},components:{PbContactPhoto:G,PbContactValue:it},mounted(){}};const ot=(0,b.Z)(st,[["render",R],["__scopeId","data-v-2171889b"]]);var ct=ot;const rt={class:"mt-4 row p-2"};function mt(t,e,l,a,i,s){const o=(0,n.up)("pb-contact-card"),c=(0,n.up)("pb-contact-table");return(0,n.wg)(),(0,n.iD)("div",rt,["card"==l.view?((0,n.wg)(!0),(0,n.iD)(n.HY,{key:0},(0,n.Ko)(l.contacts,((a,i)=>((0,n.wg)(),(0,n.j4)(o,{item:a,key:a.id,"department-title":s.departmentTitle(a.department,l.contacts[i-1]&&l.contacts[i-1].department),view:t.defaultView,onFilter:e[0]||(e[0]=e=>t.$emit("filter",e))},null,8,["item","department-title","view"])))),128)):(0,n.kq)("",!0),"table"==l.view?((0,n.wg)(!0),(0,n.iD)(n.HY,{key:1},(0,n.Ko)(l.contacts,((a,i)=>((0,n.wg)(),(0,n.j4)(c,{item:a,key:a.id,"department-title":s.departmentTitle(a.department,l.contacts[i-1]&&l.contacts[i-1].department),onFilter:e[1]||(e[1]=e=>t.$emit("filter",e))},null,8,["item","department-title"])))),128)):(0,n.kq)("",!0)])}const dt=t=>((0,n.dD)("data-v-0e84af74"),t=t(),(0,n.Cn)(),t),pt={key:0,class:"col-lg-6 p-0 d-flex"},ut={class:"m-2 p-3 shadow-sm bg-white rounded d-flex flex-fill flex-row align-self-stretch"},ft={class:"d-flex flex-column flex-fill"},ht={class:"d-flex flex-column flex-sm-row"},vt={class:"align-self-top text-center pt-2"},xt={class:"p-2 flex-fill"},wt=["textContent"],gt=["textContent"],yt=["textContent"],bt={class:"d-flex flex-row justify-content-around justify-content-sm-between text-muted"},_t={key:0,class:"me-1"},Ct=dt((()=>(0,n._)("small",{class:"text-nowrap"},[(0,n._)("span",{class:"fa fa-phone"}),(0,n._)("span",{class:"font-weight-bold ms-1"},"Телефон для связи:")],-1))),kt={key:1,class:"ms-1"},Dt=dt((()=>(0,n._)("small",{class:"text-nowrap"},[(0,n._)("span",{class:"fa fa-at"}),(0,n._)("span",{class:"font-weight-bold ms-1"},"Электронная почта:")],-1)));function Pt(t,e,l,a,i,s){const o=(0,n.up)("pb-contact-department"),c=(0,n.up)("pb-contact-photo"),r=(0,n.up)("pb-contact-value");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(o,{department:l.departmentTitle,onClick:s.clickDepartment},null,8,["department","onClick"]),"card"==l.view?((0,n.wg)(),(0,n.iD)("div",pt,[(0,n._)("div",ut,[(0,n._)("div",ft,[(0,n._)("div",ht,[(0,n._)("div",vt,[(0,n.Wm)(c,{src:l.item.photo,onClick:s.clickContact},null,8,["src","onClick"])]),(0,n._)("div",xt,[(0,n._)("h6",{class:"text-center text-sm-start click",textContent:(0,k.zw)(l.item.name),onClick:e[0]||(e[0]=(...t)=>s.clickContact&&s.clickContact(...t))},null,8,wt),(0,n._)("small",null,[(0,n._)("p",{class:"text-center text-sm-start m-0",textContent:(0,k.zw)(l.item.title)},null,8,gt),(0,n._)("p",{class:"text-center text-sm-start m-0",textContent:(0,k.zw)(l.item.department.name)},null,8,yt)])])]),(0,n._)("div",bt,[l.item.params.phone?((0,n.wg)(),(0,n.iD)("div",_t,[Ct,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.item.params.phone,(t=>((0,n.wg)(),(0,n.j4)(r,{item:t,key:t,small:""},null,8,["item"])))),128))])):(0,n.kq)("",!0),l.item.params.email?((0,n.wg)(),(0,n.iD)("div",kt,[Dt,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.item.params.email,(t=>((0,n.wg)(),(0,n.j4)(r,{item:t,key:t,small:""},null,8,["item"])))),128))])):(0,n.kq)("",!0)])])])])):(0,n.kq)("",!0)],64)}const jt=["onClick"],St={class:"m-2 p-2 shadow-sm bg-light rounded d-flex flex-fill flex-column align-self-stretch"},Ht={class:"mx-2 d-lg-flex flex-row"},It=["textContent"];function Vt(t,e,l,a,i,s){return(0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.department,((t,e)=>((0,n.wg)(),(0,n.iD)("div",{key:t,class:"col-12 p-0 d-flex",onClick:()=>s.clickDepartment(e+1)},[(0,n._)("div",St,[(0,n._)("div",Ht,[(0,n._)("h5",{class:(0,k.C_)(["m-0 align-self-center flex-fill",{click:e<l.department.length-1}]),textContent:(0,k.zw)(t)},null,10,It)])])],8,jt)))),128)}var qt={name:"PbContactDepartment",props:{department:{type:Array,default:[]}},emits:["click"],methods:{clickDepartment(t){t<this.department.length&&this.$emit("click",this.department.slice(0,t).join(" "))}}};const zt=(0,b.Z)(qt,[["render",Vt],["__scopeId","data-v-800fd56c"]]);var Yt=zt,Kt={name:"PbContactCard",props:{item:Object,departmentTitle:{type:Array,default:[]},view:{type:String,default:"card"}},components:{PbContactValue:it,PbContactDepartment:Yt,PbContactPhoto:G},emits:["filter"],methods:{clickContact(){this.$emit("filter",this.item.name)},clickDepartment(t){this.$emit("filter",t)}}};const $t=(0,b.Z)(Kt,[["render",Pt],["__scopeId","data-v-0e84af74"]]);var Tt=$t;const Ut=t=>((0,n.dD)("data-v-5f2985b0"),t=t(),(0,n.Cn)(),t),Zt=(0,n.uE)('<div class="row py-2 mx-0 px-0" data-v-5f2985b0><div class="col text-center" data-v-5f2985b0><h6 data-v-5f2985b0><small data-v-5f2985b0>Должность / Ф.И.О.</small></h6></div><div class="col text-center" data-v-5f2985b0><h6 data-v-5f2985b0><small data-v-5f2985b0>Телефон внутренний</small></h6></div><div class="col text-center" data-v-5f2985b0><h6 data-v-5f2985b0><small data-v-5f2985b0>Телефон городской</small></h6></div><div class="col text-center" data-v-5f2985b0><h6 data-v-5f2985b0><small data-v-5f2985b0>HiCom</small></h6></div><div class="col text-center" data-v-5f2985b0><h6 data-v-5f2985b0><small data-v-5f2985b0>Электронная почта</small></h6></div></div>',1),Ft={class:"col"},Wt={class:"text-center text-sm-start"},Et=["textContent"],Mt=Ut((()=>(0,n._)("br",null,null,-1))),Ot=["textContent"],Rt={class:"col"},At={class:"justify-content-center"},Bt={class:"col"},Lt={class:"justify-content-center"},Nt={class:"col"},Gt={class:"justify-content-center"},Jt={class:"col"},Qt={class:"justify-content-center"};function Xt(t,e,l,a,i,s){const o=(0,n.up)("pb-contact-department"),c=(0,n.up)("pb-contact-value");return(0,n.wg)(),(0,n.iD)(n.HY,null,[l.departmentTitle.length>0?((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n.Wm)(o,{department:l.departmentTitle,onClick:s.clickDepartment},null,8,["department","onClick"]),Zt],64)):(0,n.kq)("",!0),(0,n._)("div",{class:"row py-2 mx-0 px-0 click align-items-center",onClick:e[0]||(e[0]=(...t)=>s.clickContact&&s.clickContact(...t))},[(0,n._)("small",Ft,[(0,n._)("div",Wt,[(0,n._)("span",{textContent:(0,k.zw)(l.item.title)},null,8,Et),Mt,(0,n._)("span",{textContent:(0,k.zw)(l.item.name)},null,8,Ot)])]),(0,n._)("div",Rt,[(0,n._)("div",At,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.extPhone(l.item.params.phone),(t=>((0,n.wg)(),(0,n.j4)(c,{key:t,item:t,notitle:1==s.uniqItem(s.extPhone(l.item.params.phone).map((t=>t.type))).length,small:"",center:"",hint:""},null,8,["item","notitle"])))),128))])]),(0,n._)("div",Bt,[(0,n._)("div",Lt,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.intPhone(l.item.params.phone),(t=>((0,n.wg)(),(0,n.j4)(c,{key:t,item:t,notitle:1==s.uniqItem(s.intPhone(l.item.params.phone).map((t=>t.type))).length,small:"",center:"",hint:""},null,8,["item","notitle"])))),128))])]),(0,n._)("div",Nt,[(0,n._)("div",Gt,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.hicomPhone(l.item.params.phone),(t=>((0,n.wg)(),(0,n.j4)(c,{key:t,item:t,notitle:1==s.uniqItem(s.hicomPhone(l.item.params.phone).map((t=>t.type))).length,small:"",center:"",hint:""},null,8,["item","notitle"])))),128))])]),(0,n._)("div",Jt,[(0,n._)("div",Qt,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(l.item.params.email,(t=>((0,n.wg)(),(0,n.j4)(c,{key:t,item:t,notitle:1==s.uniqItem(l.item.params.email.map((t=>t.type))).length,small:"",center:"",hint:""},null,8,["item","notitle"])))),128))])])])],64)}var te={name:"PbContactTable",props:{item:Object,departmentTitle:{type:Array,default:[]}},components:{PbContactValue:it,PbContactDepartment:Yt,PbContactPhoto:G},emits:["filter"],methods:{clickContact(){this.$emit("filter",this.item.name)},clickDepartment(t){this.$emit("filter",t)},extPhone(t){return t.filter((t=>RegExp("^рабочий|^конференция","i").test(t.type)))},intPhone(t){return t.filter((t=>RegExp("^городской","i").test(t.type)))},hicomPhone(t){return t.filter((t=>RegExp("^hicom","i").test(t.type)))},uniqItem(t){return t.filter(((t,e,l)=>l.indexOf(t)===e))}}};const ee=(0,b.Z)(te,[["render",Xt],["__scopeId","data-v-5f2985b0"]]);var le=ee,ne={name:"PbContacts",props:{contacts:{type:Array,default:[]},view:{type:String,default:"card"}},components:{PbContactCard:Tt,PbContactTable:le},emits:["filter"],methods:{departmentTitle(t,e=[]){for(let l=0;l<t.length;l++)if(!e[l]||e[l]!=t[l])return t.slice(l);return[]}}};const ae=(0,b.Z)(ne,[["render",mt]]);var ie=ae,se=l(9242);const oe={class:"v-spinner"};function ce(t,e,l,a,i,s){return(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",oe,[(0,n._)("div",{class:"v-scale v-scale1",style:(0,k.j5)([i.spinnerStyle,i.spinnerDelay1])},null,4),(0,n._)("div",{class:"v-scale v-scale2",style:(0,k.j5)([i.spinnerStyle,i.spinnerDelay2])},null,4),(0,n._)("div",{class:"v-scale v-scale3",style:(0,k.j5)([i.spinnerStyle,i.spinnerDelay3])},null,4),(0,n._)("div",{class:"v-scale v-scale4",style:(0,k.j5)([i.spinnerStyle,i.spinnerDelay4])},null,4),(0,n._)("div",{class:"v-scale v-scale5",style:(0,k.j5)([i.spinnerStyle,i.spinnerDelay5])},null,4)],512)),[[se.F8,l.loading]])}var re={name:"ScaleLoader",props:{loading:{type:Boolean,default:!0},color:{type:String,default:"#5dc596"},height:{type:String,default:"35px"},width:{type:String,default:"4px"},margin:{type:String,default:"2px"},radius:{type:String,default:"2px"}},data(){return{spinnerStyle:{backgroundColor:this.color,height:this.height,width:this.width,margin:this.margin,borderRadius:this.radius,display:"inline-block",animationName:"v-scaleStretchDelay",animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(.2,.68,.18,1.08)",animationFillMode:"both"},spinnerDelay1:{animationDelay:"0.1s"},spinnerDelay2:{animationDelay:"0.2s"},spinnerDelay3:{animationDelay:"0.3s"},spinnerDelay4:{animationDelay:"0.4s"},spinnerDelay5:{animationDelay:"0.5s"}}}};const me=(0,b.Z)(re,[["render",ce]]);var de=me,pe={name:"ContactsView",components:{PbSearch:C,PbDetailContact:ct,PbContacts:ie,ScaleLoader:de},data(){return{limit:30,filter:this.getUrlHashValue()}},mounted(){const t={rootMargin:"0px",threshold:1},e=(t,e)=>{t[0].isIntersecting&&this.loadMoreContacts({limit:0==this.contacts.length?10:this.limit,filter:this.filter})},l=new IntersectionObserver(e,t);l.observe(this.$refs.observer)},unmounted(){this.contacts.length>100&&this.loadContacts({limit:10,filter:this.filter,reload:!0})},methods:{...(0,u.RE)("phonebook",["loadMoreContacts","loadContacts"]),getUrlHashValue(){let t=decodeURIComponent(window.location.hash.slice(1));switch(t){case"index":return""}return t}},watch:{filter(t){window.location.hash=t,t!=this.lastFilter&&this.loadContacts({limit:10,filter:t,reload:!0})}},setup(){return(0,d.jq)({title:p.v.title("Контакты")}),{...(0,u.U2)("app/*"),...(0,u.U2)("phonebook/*")}},created(){this.filter=this.lastFilter||this.getUrlHashValue(),window.onhashchange=t=>{let e=this.getUrlHashValue();switch(e){case"index":this.filter="";break;default:this.filter=e}}}};const ue=(0,b.Z)(pe,[["render",m]]);var fe=ue}}]);
//# sourceMappingURL=views-Contacts.94d4c6d0.js.map