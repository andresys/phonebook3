<%= form_with model: [:admin, @department] do |f| %>
  <div class="md:flex mb-4" 
    data-controller="tabs"
    data-tabs-active-class="text-white bg-pb-500 dark:bg-blue-600"
    data-tabs-default-class="hover:text-gray-900 bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 dark:hover:text-white"
    data-tabs-default-tab-value="profile">
    <ul class="flex-column space-y space-y-4 text-sm font-medium text-gray-500 dark:text-gray-400 md:me-4 mb-4 md:mb-0">
      <li>
        <a href="#" id="profile" class="inline-flex items-center px-4 py-3 rounded-lg w-full" data-tabs-target="btn" data-action="click->tabs#select">
          <svg class="w-4 h-4 me-2" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
              <path d="M10 0a10 10 0 1 0 10 10A10.011 10.011 0 0 0 10 0Zm0 5a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm0 13a8.949 8.949 0 0 1-4.951-1.488A3.987 3.987 0 0 1 9 13h2a3.987 3.987 0 0 1 3.951 3.512A8.949 8.949 0 0 1 10 18Z"/>
          </svg>
          Информация
        </a>
      </li>
      <li>
        <a href="#" id="contacts" class="inline-flex items-center px-4 py-3 rounded-lg w-full" data-tabs-target="btn" data-action="click->tabs#select">
          <svg class="w-4 h-4 me-2" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
            <path d="M7.824 5.937a1 1 0 0 0 .726-.312 2.042 2.042 0 0 1 2.835-.065 1 1 0 0 0 1.388-1.441 3.994 3.994 0 0 0-5.674.13 1 1 0 0 0 .725 1.688Z"/>
            <path d="M17 7A7 7 0 1 0 3 7a3 3 0 0 0-3 3v2a3 3 0 0 0 3 3h1a1 1 0 0 0 1-1V7a5 5 0 1 1 10 0v7.083A2.92 2.92 0 0 1 12.083 17H12a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v1a2 2 0 0 0 2 2h1a1.993 1.993 0 0 0 1.722-1h.361a4.92 4.92 0 0 0 4.824-4H17a3 3 0 0 0 3-3v-2a3 3 0 0 0-3-3Z"/>
          </svg>
          Контакты
        </a>
      </li>
    </ul>

    <div class="card p-6 bg-gray-50 w-full" data-tabs-target="tab" id="profile">
      <div class="flex flex-wrap lg:flex-nowrap gap-2 mb-4 items-baseline">
        <%= f.label :name, "Наименование:", class: "font-medium min-w-64" %>
        <%= f.text_field :name, class: "form-input grow", placeholder: "Наименование подразделения" %>
      </div>

      <div class="flex flex-wrap lg:flex-nowrap gap-2 mb-4 items-baseline">
        <%= f.label :parent_id, "Родительское подразделения:", class: "font-medium min-w-64" %>
        <%= f.select :parent_id, nested_set_options(Department) {|i| "#{'-' * i.level} #{i.name}" }, { include_blank: true }, class: "form-input grow" %>
      </div>

      <div class="flex flex-wrap lg:flex-nowrap gap-2 mb-8 items-baseline">
        <%= f.label :chief_id, "Руководитель:", class: "font-medium min-w-64" %>
        <%= f.select :chief_id, Contact.all.collect {|contact| [ contact, contact.id ] }, { include_blank: true }, class: "form-input grow" %>
      </div>
    </div>

    <div class="card p-6 bg-gray-50 w-full" data-tabs-target="tab" id="contacts">
      <div class="flex flex-wrap lg:flex-nowrap gap-2 mb-4 items-baseline">
        <%= label_tag "contact[params][phone][0]", "Контактный телефон:", class: "font-medium min-w-64" %>
        <% default_types = ['рабочий', 'мобильный', 'домашний'] %>
        <%= render partial: "params", locals: {contact: @department, param_type: 'phone', type_name: "Тип номера", type_value: "Номер", default_types: default_types} %>
        <%#= f.text_field :name, class: "form-input grow", placeholder: "Наименование подразделения" %>
      </div>

      <div class="flex flex-wrap lg:flex-nowrap gap-2 mb-4 items-baseline">
        <%= label_tag "contact[params][email][0]", "Контактный Email:", class: "font-medium min-w-64" %>
        <% default_types = ['рабочий', 'домашний'] %>
        <%= render partial: "params", locals: {contact: @department, param_type: 'email', type_name: "Тип email", type_value: "Email", default_types: default_types} %>
        <%#= f.select :parent_id, nested_set_options(Department) {|i| "#{'-' * i.level} #{i.name}" }, { include_blank: true }, class: "form-input grow" %>
      </div>

      <div class="flex flex-wrap lg:flex-nowrap gap-2 mb-8 items-baseline">
        <%= f.label :location, "Адрес подразделения:", class: "font-medium min-w-64" %>
        <div class="grid grid-cols-5 gap-2 grow">
          <%= f.select :location, Address.all_locations, { include_blank: true }, data: {role: "select2", placeholder: "Населенный пункт", tags: true}, class: "form-input col-span-3" %>
          <%= f.select :zip, Address.all_zips, { include_blank: true }, data: {role: "select2", placeholder: "Индекс", tags: true}, class: "form-input col-span-2" %>
          <%= f.select :street, Address.all_streets, { include_blank: true }, data: {role: "select2", placeholder: "Улица", tags: true}, class: "form-input col-span-3" %>
          <%= f.select :house, Address.all_houses, { include_blank: true }, data: {role: "select2", placeholder: "Номер дома", tags: true}, class: "form-input" %>
          <%= f.select :room, Address.all_rooms, { include_blank: true }, data: {role: "select2", placeholder: "Офис", tags: true}, class: "form-input" %>
          <%#= f.select :chief_id, Contact.all.collect {|contact| [ contact, contact.id ] }, { include_blank: true }, class: "form-input grow" %>
        </div>
      </div>
    </div>
  </div>

  <div class="flex gap-2 justify-center items-baseline">
    <%= link_to "Отмена", [:admin, :departments], class: "btn", role: "button" %>
    <%= f.button "Сохранить", class: "btn-primary" %>
  </div>
<% end %>






    <%# #contacts.tab-pane.fade
      .form-group.row.mt-5
        = label_tag "contact[params][phone][0]", "Контактный телефон:", class: "col-sm-3 col-form-label"
        .col-sm-9
          - default_types = ['рабочий', 'мобильный', 'домашний']
          = render partial: "params", locals: {contact: @department, param_type: 'phone', type_name: "Тип номера", type_value: "Номер", default_types: default_types}

      .form-group.row.mt-4
        = label_tag "contact[params][email][0]", "Контактный Email:", class: "col-sm-3 col-form-label"
        .col-sm-9
          - default_types = ['рабочий', 'домашний']
          = render partial: "params", locals: {contact: @department, param_type: 'email', type_name: "Тип email", type_value: "Email", default_types: default_types}

      .form-group.row.mt-4
        = f.label :location, "Адрес подразделения:", class: "col-sm-3 col-form-label"
        .col-sm-9
          .form-row.form-group
            .col-8
              = f.select :location, Address.all_locations, { include_blank: true }, data: {role: "select2", placeholder: "Населенный пункт", tags: true}
            .col-4
              = f.select :zip, Address.all_zips, { include_blank: true }, data: {role: "select2", placeholder: "Индекс", tags: true}
          .form-row.form-group
            .col-6
              = f.select :street, Address.all_streets, { include_blank: true }, data: {role: "select2", placeholder: "Улица", tags: true}
            .col-3
              = f.select :house, Address.all_houses, { include_blank: true }, data: {role: "select2", placeholder: "Номер дома", tags: true}
            .col-3
              = f.select :room, Address.all_rooms, { include_blank: true }, data: {role: "select2", placeholder: "Офис", tags: true} %>